function getXML(){var t='<rss version="2.0">\t\t\t\t\t\t <worker>\t\t\t\t\t\t \t<personality>\t\t\t\t\t\t \t\t<avatar>Каверин</avatar>\t\t\t\t\t\t \t\t<name>Олег</name>\t\t\t\t\t\t \t</personality>\t\t\t\t\t\t \t<orders>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Тарасюк Е.М.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>C 250 Седан, гос. номер C400EC123</car-name>\t\t\t\t\t\t \t\t\t<start-repair>-</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>19:30</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Котикова Е.А.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GLS 350 BlueTEC 4MATIC, гос. номер E411KX23</car-name>\t\t\t\t\t\t \t\t\t<start-repair>12:40</start-repair>\t\t\t\t\t\t \t\t\t<condition></condition>\t\t\t\t\t\t \t\t\t<finish-repair>14:00</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Даурова Т.Н.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>S 400 4MATIC, гос. номер P093PP93</car-name>\t\t\t\t\t\t \t\t\t<start-repair>16:00</start-repair>\t\t\t\t\t\t \t\t\t<condition></condition>\t\t\t\t\t\t \t\t\t<finish-repair>17:00</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Чапурин В.М.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GLK 220 CDI 4MATIC, гос. номер Нет</car-name>\t\t\t\t\t\t \t\t\t<start-repair>17:00</start-repair>\t\t\t\t\t\t \t\t\t<condition>Согласование с клиентом</condition>\t\t\t\t\t\t \t\t\t<finish-repair>20:00</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t</orders>\t\t\t\t\t\t </worker>\t\t\t\t\t\t <worker>\t\t\t\t\t\t \t<personality>\t\t\t\t\t\t \t\t<avatar>Альшанов</avatar>\t\t\t\t\t\t \t\t<name>Владимир</name>\t\t\t\t\t\t \t</personality>\t\t\t\t\t\t \t<orders>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Брындина А.А.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GLC 300 4MATIC, гос. номер Нет</car-name>\t\t\t\t\t\t \t\t\t<start-repair>-</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>16:29</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Зубова Э.В.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>ML 350 4MATIC, гос. номер P881PP93</car-name>\t\t\t\t\t\t \t\t\t<start-repair>10:20</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>19:40</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Ашикян А.О.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GL 350 CDI 4MATIC, гос. номер H777YK93</car-name>\t\t\t\t\t\t \t\t\t<start-repair>12:09</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>12:15</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Сараев Г.А.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>C 180, гос. номер H214OE123</car-name>\t\t\t\t\t\t \t\t\t<start-repair>13:00</start-repair>\t\t\t\t\t\t \t\t\t<condition></condition>\t\t\t\t\t\t \t\t\t<finish-repair>13:59</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Зороглян Р.П.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>C 180, гос. номер H900XB93</car-name>\t\t\t\t\t\t \t\t\t<start-repair>16:30</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>18:10</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Чапурин В.М.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GLK 220 CDI 4MATIC, гос. номер Нет</car-name>\t\t\t\t\t\t \t\t\t<start-repair>17:00</start-repair>\t\t\t\t\t\t \t\t\t<condition>Согласование с клиентом</condition>\t\t\t\t\t\t \t\t\t<finish-repair>20:00</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>ФСО Служба охраны</owner-name>\t\t\t\t\t\t \t\t\t<car-name>ML 500 4MATIC, гос. номер O593MX93</car-name>\t\t\t\t\t\t \t\t\t<start-repair>18:16</start-repair>\t\t\t\t\t\t \t\t\t<condition>Приемка</condition>\t\t\t\t\t\t \t\t\t<finish-repair>23:16</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Тарасюк Е.М.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>C 250 Седан, гос. номер C400EC123</car-name>\t\t\t\t\t\t \t\t\t<start-repair>-</start-repair>\t\t\t\t\t\t \t\t\t<condition>Ожидание приема</condition>\t\t\t\t\t\t \t\t\t<finish-repair>19:30</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t\t<order>\t\t\t\t\t\t \t\t\t<owner-name>Котикова Е.А.</owner-name>\t\t\t\t\t\t \t\t\t<car-name>GLS 350 BlueTEC 4MATIC, гос. номер E411KX23</car-name>\t\t\t\t\t\t \t\t\t<start-repair>12:40</start-repair>\t\t\t\t\t\t \t\t\t<condition></condition>\t\t\t\t\t\t \t\t\t<finish-repair>14:00</finish-repair>\t\t\t\t\t\t \t\t</order>\t\t\t\t\t\t \t</orders>\t\t\t\t\t\t </worker>\t\t\t\t\t\t </rss>';return t}function getDataFromFile(){var t=$($.parseXML(getXML()));return t}function getWorkers(){var t=[],e=getDataFromFile();$(e).find("worker").each(function(){var e=$(this).find("avatar").text(),n=$(this).find("name").text(),r=[];$(this).find("order").each(function(){var t=$(this).find("car-name").text(),e=$(this).find("owner-name").text(),n=$(this).find("condition").text(),i=$(this).find("start-repair").text(),o=$(this).find("finish-repair").text(),a=new Order(t,e,n,i,o);r.push(a)});var i=new Worker(e,n,r);t.push(i)});return t}function main(){setInterval(showTime,1e3),setInterval(showVideo,1e4);var t=getWorkers(),e=t.length;1==e?(showWorker(t[0]),makeOneColumn()):2==e?(showWorker(t[0]),showWorker(t[1]),makeTwoColumns()):showWarning()}function Order(t,e,n,r,i){this.carName=t,this.ownerName=e,this.condition=n,this.startRepair=r,this.finishRepair=i}function getTemplateForOrder(t){var e='<table class="worker-order">\t\t\t\t\t\t\t\t<tr class="order-details">\t\t\t\t\t\t\t\t\t<td class="owner-name">'+t.ownerName+'</td>\t\t\t\t\t\t\t\t\t<td class="car-name">'+t.carName+'</td>\t\t\t\t\t\t\t\t\t<td class="start-repair">'+t.startRepair+'</td>\t\t\t\t\t\t\t\t\t<td class="condition">'+t.condition+'</td>\t\t\t\t\t\t\t\t\t<td class="finish-repair">'+t.finishRepair+"</td>\t\t\t\t\t\t\t\t</tr>\t\t\t\t\t\t\t</table>";return e}function showWorker(t){t.orders.length<5?showWithStaticOrders(t):showWithDinamicOrders(t)}function makeOneColumn(){$(".worker").css("margin-left","5%").css("width","90%")}function makeTwoColumns(){$(".worker:first-child").css("margin-left","5em").css("float","left"),$(".worker:last-child").css("float","right").css("margin-right","5em")}function showWithStaticOrders(t){var e=getTemplateForWorker(t),n=t.orders;for(order in n)e+=getTemplateForOrder(n[order]);e+="</div>",$(".main").append(e)}function showWithDinamicOrders(t){function e(){function t(t){$(".dinamic .worker-order:nth-child("+(t+1)+")").toggleClass("animated flipInX").html(getTemplateForOrder(r[t+4])),setTimeout(function(){$(".dinamic .worker-order:nth-child("+(t+1)+")").toggleClass("animated flipInX")},1e3)}for(var e=500,n=0;n<4;n++)setTimeout(t,e,n),e+=500}var n=getTemplateForWorker(t),r=t.orders;n+='<div class="dinamic" style="height: 24.8em">';for(var i=0;i<4;i++)n+=getTemplateForOrder(r[i]);n+="</div></div>",$(".main").append(n),setInterval(e,5e3)}function showVideo(){$(".bgvideo").toggle().get(0).play()}function showTime(){function t(t){return t<10?"0"+t:t}function e(t){switch(t){case 0:return"января";case 1:return"февраля";case 2:return"марта";case 3:return"апреля";case 4:return"мая";case 5:return"июня";case 6:return"июля";case 7:return"августа";case 8:return"сентября";case 9:return"октября";case 10:return"ноября";case 11:return"декабря"}}var n=new Date;$(".time p").html(n.getDate()+" "+e(n.getMonth())+" "+n.getHours()+":"+t(n.getMinutes())+":"+t(n.getSeconds()))}function Worker(t,e,n){this.avatar=t,this.name=e,this.orders=n}function getTemplateForWorker(t){var e='<div class="worker"><div class="worker-personal"> \t\t\t\t\t\t\t\t<img src="img/'+t.avatar+'.jpg" alt="worker-avatar" \t\t\t\t\t\t\t\tclass="worker-avatar img-thumbnail"> \t\t\t\t\t\t\t\t<h2 class="worker-name">'+t.name+"</h2></div>";return e}$(document).ready(function(){main()});